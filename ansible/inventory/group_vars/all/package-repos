---
###############################################################################
# Deb

# List of Deb package repositories.
# Each item is a dict with the following items:
# name: Repository name.
# url: URL of upstream package mirror.
# policy: Policy for upstream remote. Optional.
# architectures: Architectures to sync.
# components: Components to sync.
# distributions: Distributions to sync.
# mirror: If True, synchronization will remove all content that is not present
#         in the remote repository. If False, sync will be additive only.
#         Optional, default is true.
# mode: Publication mode.
# base_path: Base path prefix for distributions.
# short_name: Name used internally for variable names.
# distribution_name: Name prefix for distributions. Version will be appended.
# sync: Whether to sync the repository with a remote. Optional, default is true.
# publish: Whether to publish and distribute the repository. Optional, default is true.
deb_package_repos:
  # Base Ubuntu Focal 20.04 repositories
  - name: Ubuntu focal
    url: http://nova.clouds.archive.ubuntu.com/ubuntu/
    # Ubuntu Focal repositories can't be synced with immediate policy using the
    # existing 120G root disk on Ark.
    policy: on_demand
    architectures: amd64
    components: main restricted universe multiverse
    # NOTE: Include focal-security here to include all dists under one mirror
    # path. This allows us to include security updates when using
    # DIB_DISTRIBUTION_MIRROR with the Diskimage builder ubuntu-minimal
    # element.
    distributions: focal focal-updates focal-backports focal-security
    mirror: true
    mode: verbatim
    base_path: ubuntu/focal/
    short_name: ubuntu_focal
    distribution_name: ubuntu-focal-
  # https://wiki.ubuntu.com/SecurityTeam/FAQ suggests that security.ubuntu.com
  # is preferable for security updates, so use this in preference to the
  # focal-security dist in the main Ubuntu focal repository where possible.
  - name: Ubuntu focal security
    url: http://security.ubuntu.com/ubuntu
    # Ubuntu Focal repositories can't be synced with immediate policy using the
    # existing 120G root disk on Ark.
    policy: on_demand
    architectures: amd64
    components: main restricted universe multiverse
    distributions: focal-security
    mirror: true
    mode: verbatim
    base_path: ubuntu/focal-security/
    short_name: ubuntu_focal_security
    distribution_name: ubuntu-focal-security-

  # Ubuntu Cloud Archive (UCA)
  - name: Ubuntu Cloud Archive
    url: http://ubuntu-cloud.archive.canonical.com/ubuntu
    architectures: amd64
    components: main
    distributions: focal-updates/wallaby focal-updates/xena
    mirror: true
    mode: verbatim
    base_path: ubuntu-cloud-archive/
    short_name: ubuntu_cloud_archive
    distribution_name: ubuntu-cloud-archive-

  # Third-party repositories
  - name: Docker CE for Ubuntu
    url: https://download.docker.com/linux/ubuntu
    architectures: amd64
    distributions: focal
    components: stable
    mirror: true
    mode: verbatim
    base_path: docker-ce/ubuntu/
    short_name: docker_ce_ubuntu
    distribution_name: docker-ce-for-ubuntu-

# Default filter string for Deb package repositories.
deb_package_repo_filter: ""

# List of package repositories after applying filter.
deb_package_repos_filtered: "{{ deb_package_repos | select_repos(deb_package_repo_filter) }}"

###############################################################################
# RPM

# List of RPM package repositories.
# Each item is a dict with the following items:
# name: Repository name.
# url: URL of upstream package mirror.
# policy: Policy for upstream remote. Optional.
# sync_policy: Sync policy for upstream remote. Optional.
# base_path: Base path prefix for distributions.
# short_name: Name used internally for variable names.
# distribution_name: Name prefix for distributions. Version will be appended.
# sync: Whether to sync the repository with a remote. Optional, default is true.
# publish: Whether to publish and distribute the repository. Optional, default is true.
rpm_package_repos:
  # Base CentOS 8 Stream repositories
  - name: CentOS Stream 8 - AppStream
    url: http://mirrorlist.centos.org/?release=8-stream&arch=x86_64&repo=AppStream&infra=genclo
    base_path: centos/8-stream/AppStream/x86_64/os/
    short_name: centos_stream_8_appstream
    distribution_name: centos-stream-8-appstream-
  - name: CentOS Stream 8 - BaseOS
    url: http://mirrorlist.centos.org/?release=8-stream&arch=x86_64&repo=BaseOS&infra=genclo
    base_path: centos/8-stream/BaseOS/x86_64/os/
    short_name: centos_stream_8_baseos
    distribution_name: centos-stream-8-baseos-
  - name: CentOS Stream 8 - Extras
    url: http://mirrorlist.centos.org/?release=8-stream&arch=x86_64&repo=extras&infra=genclo
    base_path: centos/8-stream/extras/x86_64/os/
    short_name: centos_stream_8_extras
    distribution_name: centos-stream-8-extras-

  # Additional CentOS 8 Stream repositories
  - name: CentOS Stream 8 - Advanced Virtualization
    url: http://mirrorlist.centos.org/?release=8-stream&arch=x86_64&repo=virt-advancedvirt-common
    base_path: centos/8-stream/virt/x86_64/advancedvirt-common/
    short_name: centos_stream_8_advanced_virtualization
    distribution_name: centos-stream-8-advancedvirt-
  - name: CentOS Stream 8 - Ceph Nautilus
    url: http://mirrorlist.centos.org/?release=8-stream&arch=x86_64&repo=storage-ceph-nautilus
    base_path: centos/8-stream/storage/x86_64/ceph-nautilus/
    short_name: centos_stream_8_storage_ceph_nautilus
    distribution_name: centos-stream-8-storage-ceph-nautilus-
  - name: CentOS Stream 8 - Ceph Pacific
    url: http://mirrorlist.centos.org/?release=8-stream&arch=x86_64&repo=storage-ceph-pacific
    base_path: centos/8-stream/storage/x86_64/ceph-pacific/
    short_name: centos_stream_8_storage_ceph_pacific
    distribution_name: centos-stream-8-storage-ceph-pacific-
  - name: CentOS Stream 8 - NFV Extras
    url: http://mirrorlist.centos.org/?release=8-stream&arch=x86_64&repo=nfv-network-extras
    base_path: centos/8-stream/nfv/x86_64/network-extras/
    short_name: centos_stream_8_nfv_extras
    distribution_name: centos-stream-8-nfv-extras-
  - name: CentOS Stream 8 - NFV OpenvSwitch
    url: http://mirrorlist.centos.org/?release=8-stream&arch=x86_64&repo=nfv-openvswitch-2
    base_path: centos/8-stream/nfv/x86_64/openvswitch-2/
    short_name: centos_stream_8_nfv_openvswitch
    distribution_name: centos-stream-8-nfv-openvswitch-
  - name: CentOS Stream 8 - OpenStack Wallaby
    url: http://mirrorlist.centos.org/?release=8-stream&arch=x86_64&repo=cloud-openstack-wallaby
    base_path: centos/8-stream/cloud/x86_64/openstack-wallaby/
    short_name: centos_stream_8_openstack_wallaby
    distribution_name: centos-stream-8-openstack-wallaby-
  - name: CentOS Stream 8 - OpenStack Xena
    url: http://mirrorlist.centos.org/?release=8-stream&arch=x86_64&repo=cloud-openstack-xena
    base_path: centos/8-stream/cloud/x86_64/openstack-xena/
    short_name: centos_stream_8_openstack_xena
    distribution_name: centos-stream-8-openstack-xena-
  - name: CentOS Stream 8 - OpenStack Yoga
    url: http://mirrorlist.centos.org/?release=8-stream&arch=x86_64&repo=cloud-openstack-yoga
    base_path: centos/8-stream/cloud/x86_64/openstack-yoga/
    short_name: centos_stream_8_openstack_yoga
    distribution_name: centos-stream-8-openstack-yoga-
  - name: CentOS Stream 8 - OpsTools - collectd
    url: http://mirrorlist.centos.org/?release=8-stream&arch=x86_64&repo=opstools-collectd-5
    base_path: centos/8-stream/opstools/x86_64/collectd-5/
    short_name: centos_stream_8_opstools
    distribution_name: centos-stream-8-opstools-
  - name: CentOS Stream 8 - PowerTools
    url: http://mirrorlist.centos.org/?release=8-stream&arch=x86_64&repo=PowerTools&infra=genclo
    base_path: centos/8-stream/PowerTools/x86_64/os/
    short_name: centos_stream_8_powertools
    distribution_name: centos-stream-8-powertools-

  # Base CentOS 8 Linux repositories
  - name: CentOS Linux 8 - AppStream
    sync: false
    publish: false
  - name: CentOS Linux 8 - BaseOS
    sync: false
    publish: false
  - name: CentOS Linux 8 - Extras
    sync: false
    publish: false

  # Additional CentOS 8 Linux repositories (used by Stream builds)
  - name: CentOS 8 - Ceph Nautilus
    base_path: centos/8/storage/x86_64/ceph-nautilus/
    short_name: centos_8_storage_ceph_nautilus
    distribution_name: centos-8-storage-ceph-nautilus-
    sync: false
  - name: CentOS 8 - Ceph Octopus
    distribution_name: centos-8-storage-ceph-octopus-
    sync: false
    publish: false
  - name: CentOS 8 - OpsTools - collectd
    base_path: centos/8/opstools/x86_64/collectd-5/
    short_name: centos_8_opstools
    distribution_name: centos-8-opstools-
    sync: false

  # Additional CentOS 8 Linux repositories (not used by Stream builds)
  - name: CentOS-8 - Advanced Virtualization
    sync: false
    publish: false
  - name: CentOS-8 - NFV OpenvSwitch
    sync: false
    publish: false
  - name: CentOS-8 - OpenStack Ussuri
    sync: false
    publish: false
  - name: CentOS-8 - OpenStack Victoria
    sync: false
    publish: false
  - name: CentOS Linux 8 - PowerTools
    sync: false
    publish: false

  # EPEL repositories
  - name: Extra Packages for Enterprise Linux 8 - x86_64
    url: https://mirrors.fedoraproject.org/mirrorlist?repo=epel-8&arch=x86_64&infra=stock&content=centos
    # mirror_complete fails with:
    # "This repository uses features which are incompatible with 'mirror' sync. Please sync without mirroring enabled"
    sync_policy: mirror_content_only
    base_path: epel/8/Everything/x86_64/
    short_name: epel
    distribution_name: extra-packages-for-enterprise-linux-8-x86_64-
  - name: Extra Packages for Enterprise Linux Modular 8 - x86_64
    url: https://mirrors.fedoraproject.org/mirrorlist?repo=epel-modular-8&arch=x86_64&infra=stock&content=centos
    base_path: epel/8/Modular/x86_64/
    short_name: epel_modular
    distribution_name: extra-packages-for-enterprise-linux-modular-8-x86_64-

  # Third-party repositories
  - name: Docker CE for CentOS 8
    url: https://download.docker.com/linux/centos/8/x86_64/stable
    base_path: docker-ce/centos/8/x86_64/stable/
    short_name: docker
    distribution_name: docker-ce-for-centos-8-
  # Note(piotrp): With repository size of 39G - for now we'll want this on_demand
  - name: ELK repository for 7.x packages
    url: https://artifacts.elastic.co/packages/oss-7.x/yum
    policy: on_demand
    base_path: elasticsearch/oss-7.x/
    short_name: elasticsearch_logstash_kibana_7_x
    distribution_name: elasticsearch-logstash-kibana-7.x-
  # Note(piotrp): With repository size of 16G - for now we'll want this on_demand
  - name: Grafana
    url: https://packages.grafana.com/oss/rpm
    policy: on_demand
    base_path: grafana/oss/rpm/
    short_name: grafana
    distribution_name: grafana-
  - name: MariaDB 10.5
    url: https://dlm.mariadb.com/repo/mariadb-server/10.5/yum/rhel/8/x86_64
    base_path: mariadb-10.5/yum/centos8-amd64/
    short_name: mariadb_10_5_centos8
    distribution_name: mariadb-10.5-centos8
  - name: MariaDB 10.6
    url: https://dlm.mariadb.com/repo/mariadb-server/10.6/yum/rhel/8/x86_64
    base_path: mariadb-10.6/yum/centos8-amd64/
    short_name: mariadb_10_6_centos8
    distribution_name: mariadb-10.6-centos8
  - name: RabbitMQ - Erlang
    url: https://packagecloud.io/rabbitmq/erlang/el/8/x86_64
    # mirror_complete fails with:
    # "This repository uses features which are incompatible with 'mirror' sync. Please sync without mirroring enabled"
    sync_policy: mirror_content_only
    base_path: rabbitmq/erlang/el/8/x86_64/
    short_name: rabbitmq_erlang
    distribution_name: rabbitmq-erlang-
  - name: RabbitMQ - Server
    url: https://packagecloud.io/rabbitmq/rabbitmq-server/el/8/x86_64
    # mirror_complete fails with:
    # "This repository uses features which are incompatible with 'mirror' sync. Please sync without mirroring enabled"
    sync_policy: mirror_content_only
    base_path: rabbitmq/rabbitmq-server/el/8/x86_64/
    short_name: rabbitmq_server
    distribution_name: rabbitmq-server-
  - name: TreasureData 4
    url: http://packages.treasuredata.com/4/redhat/8/x86_64
    base_path: treasuredata/4/redhat/8/x86_64/
    short_name: treasuredata_4
    distribution_name: treasuredata-4-

  # Base Rocky Linux 8.5 repositories
  - name: Rocky Linux 8.5 - AppStream
    url: https://mirror.rockylinux.org/mirrorlist?repo=rocky-AppStream-8.5&arch=x86_64
    base_path: rocky/8.5/AppStream/x86_64/os/
    short_name: rocky_8_5_appstream
    distribution_name: rocky-8.5-appstream-
    sync: false
  - name: Rocky Linux 8.5 - BaseOS
    url: https://mirror.rockylinux.org/mirrorlist?repo=rocky-BaseOS-8.5&arch=x86_64
    base_path: rocky/8.5/BaseOS/x86_64/os/
    short_name: rocky_8_5_baseos
    distribution_name: rocky-8.5-baseos-
    sync: false
  - name: Rocky Linux 8.5 - Extras
    url: https://mirror.rockylinux.org/mirrorlist?repo=rocky-extras-8.5&arch=x86_64
    base_path: rocky/8.5/extras/x86_64/os/
    short_name: rocky_8_5_extras
    distribution_name: rocky-8.5-extras-
    sync: false

  # Additional Rocky Linux 8.5 repositories
  # No advanced virt, Ceph or OpenStack
  - name: Rocky Linux NFV 8.5
    url: https://mirror.rockylinux.org/mirrorlist?repo=rocky-nfv-8.5&arch=x86_64
    base_path: rocky/8.5/nfv/x86_64/os/
    short_name: rocky_8_5_nfv
    distribution_name: rocky-8.5-nfv-
    sync: false
  - name: Rocky Linux 8.5 - PowerTools
    url: https://mirror.rockylinux.org/mirrorlist?repo=rocky-PowerTools-8.5&arch=x86_64
    base_path: rocky/8.5/PowerTools/x86_64/os/
    short_name: rocky_8_5_powertools
    distribution_name: rocky-8.5-powertools-
    sync: false

  # Base Rocky Linux 8.6 repositories
  - name: Rocky Linux 8.6 - AppStream
    url: https://mirror.rockylinux.org/mirrorlist?repo=rocky-AppStream-8.6&arch=x86_64
    base_path: rocky/8.6/AppStream/x86_64/os/
    short_name: rocky_8_6_appstream
    distribution_name: rocky-8.6-appstream-
  - name: Rocky Linux 8.6 - BaseOS
    url: https://mirror.rockylinux.org/mirrorlist?repo=rocky-BaseOS-8.6&arch=x86_64
    base_path: rocky/8.6/BaseOS/x86_64/os/
    short_name: rocky_8_6_baseos
    distribution_name: rocky-8.6-baseos-
  - name: Rocky Linux 8.6 - Extras
    url: https://mirror.rockylinux.org/mirrorlist?repo=rocky-extras-8.6&arch=x86_64
    base_path: rocky/8.6/extras/x86_64/os/
    short_name: rocky_8_6_extras
    distribution_name: rocky-8.6-extras-

  # Additional Rocky Linux 8.6 repositories
  # No advanced virt, Ceph or OpenStack
  - name: Rocky Linux NFV 8.6
    url: https://mirror.rockylinux.org/mirrorlist?repo=rocky-NFV-8.6&arch=x86_64
    base_path: rocky/8.6/nfv/x86_64/os/
    short_name: rocky_8_6_nfv
    distribution_name: rocky-8.6-nfv-
  - name: Rocky Linux 8.6 - PowerTools
    url: https://mirror.rockylinux.org/mirrorlist?repo=rocky-PowerTools-8.6&arch=x86_64
    base_path: rocky/8.6/PowerTools/x86_64/os/
    short_name: rocky_8_6_powertools
    distribution_name: rocky-8.6-powertools-

  # MLNX OFED 5.6-1.0.3.3 RHEL 8.6 repository
  - name: Mellanox Technologies mlnx_ofed 5.6-1.0.3.3
    url: https://linux.mellanox.com/public/repo/mlnx_ofed/5.6-1.0.3.3/rhel8.6/x86_64/
    base_path: mlnx_ofed/5.6-1.0.3.3/rhel8.6/x86_64/
    short_name: mlnx_ofed_5_6_1_0_3_3_rhel8_6
    distribution_name: mlnx_ofed-5.6-1.0.3.3-rhel8.6-

  # MLNX OFED 5.7-1.0.2.0 RHEL 8.6 repository
  - name: Mellanox Technologies mlnx_ofed 5.7-1.0.2.0
    url: https://linux.mellanox.com/public/repo/mlnx_ofed/5.7-1.0.2.0/rhel8.6/x86_64/
    base_path: mlnx_ofed/5.7-1.0.2.0/rhel8.6/x86_64/
    short_name: mlnx_ofed_5_7_1_0_2_0_rhel8_6
    distribution_name: mlnx_ofed-5.7-1.0.2.0-rhel8.6-

# Default filter string for RPM package repositories.
rpm_package_repo_filter: ""

# List of package repositories after applying filter.
rpm_package_repos_filtered: "{{ rpm_package_repos | select_repos(rpm_package_repo_filter) }}"
